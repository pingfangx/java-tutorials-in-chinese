<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    

<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>使用准备好的语句(Java™ 教程-Java Tutorials 中文版&gt;JDBC(TM) 数据库访问&gt;JDBC 基础知识)
</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
     <meta name="description" content="This JDBC Java tutorial describes how to use JDBC API to create, insert into, update, and query tables. You will also learn how to use simple and prepared statements, stored procedures and perform transactions" />
     <meta name="keywords" content="java programming, learn java, java sample code, jdbc, prepared statement, result set" />
        
<style type="text/css">
    body {
        margin-left:10px;
        margin-right:10px;
        line-height: 1.5;
        FONT-FAMILY: Arial, Helvetica, sans-serif; 
        font-size: 0.8em;
    }
    
    a:link{text-decoration:none; color:#09569d;}
    a:visited{text-decoration:none; color: #3a87cf;}
    a:hover{text-decoration:underline; }
        
    code{
        font-family:Monaco,Courier,"Courier New";
    }
    
    .header-container {
        background-color: #fff;
        border-bottom: 1px solid #C1CFDA;
        -webkit-box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
        box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
    }
    
    .bookwrapper {
        width: auto;
        margin: auto;
    }
    
    .clearfix {
    }
    
    .clearfloat {
        clear: both;
        overflow: auto;
        height: 0px;
        font-size: 1px;
        line-height: 0px;
    }
    
    #brandProdName {
        width: auto;
        height: auto;
    }
    
    #logocover {
        display: block;
        background: transparent url(../../images/oracle-java-logo.png) 0px 0px no-repeat;
        height: 50px;
        width: 229px;
        float: left;
    }
    
    #productName {
        font-size: 16px;
        position: relative;
        top: 19px;
        padding-left: 3px;
        color: #457798;
        white-space: nowrap;
        width: 340px;
    }


    .FigureCaption   { 
        font-family: sans-serif; 
        text-align: center;
    }
    
    #TopBar_bl {        
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        margin-left: -110px;
        margin-right: -100px;       
		align: left;
        height: 60px;
    }
    #TopBar_tr {
        width: 100%;
        height: 60px;
    }
    
    #TopBar {
        min-width:700px;
        padding:25px 100px 10px;
        margin-bottom:25px;
        clear:both;
        
        border-bottom:1px solid #d2dde5;
        border-radius: 3px;
    
        background:#efefef; /* Old browsers */
        /* IE9 SVG, needs conditional override of 'filter' to 'none' */
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMmVmZjkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        background: -moz-linear-gradient(top,  #ffffff 0%, #e2eff9 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#e2eff9)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* IE10+ */
        background: linear-gradient(to bottom,  #ffffff 0%,#e2eff9 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e2eff9',GradientType=0 ); /* IE6-8 */
        
    }
    
    #TopBar_left {
        line-height: 14px;
        position: absolute;
        padding-top: 30px;
        padding-right: 30px;
        padding-left: 30px;
        text-align: left;
        font: 13px/20px Arial, Helvetica, sans-serif;
        font-weight: bold;
        font-size: 20px;
        color: #333;
    }
    
    #TopBar_right {
        line-height: 12px;
        float: right;
        padding-top: 10px;
        padding-right: 30px;
        text-align: left;
    }
    

    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    
     
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 10px;
        margin: 3px;
        padding: 0;
    }
 
    #BreadCrumbs {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    
    #BreadCrumbs a {
        color:#09569d;
    }
    
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }
    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    
    .LeftBar_shown {
        width: 13em;
        float: left;
    }
    
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    
    .LeftBar_hidden {
        display: none;
    }
    
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;       
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }

    .NavBit  {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    
    @media print {
        .NavBit {
            display: none;
        }
    }
    
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    
    #Contents a, .NavBit a, #TagNotes a {
        color:#09569d;
    }
    
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em;
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #333;
		
		
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
	
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #333;
        
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
		font-size:12px;
		font-family:Monaco,Courier,"Courier New";
    }
    
    .tocli {
        list-style-type:none;
    }

    .betadraft {
        color: red;
    }

</style>
<script type="text/javascript">
/* <![CDATA[ */
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }

    function showCode(displayCodePage, codePath) {
        var codePathEls = codePath.split("/");
        var currDocPathEls = location.href.split("/");
        //alert ("codePathEls = " + codePathEls + "\n" + "currDocPathEls = " + currDocPathEls);
        currDocPathEls.pop(); // remove file name at the end
        while (codePathEls.length > 0) {
            if (codePathEls[0] == "..") {
                codePathEls.shift();
                currDocPathEls.pop();
            } else {
                break;
            }
        }
        var fullCodePath = currDocPathEls.join("/") + "/" + codePathEls.join("/");
        //alert ("fullCodePath = " + fullCodePath );
        if (codePath.indexOf(".java") != -1 || codePath.indexOf(".jnlp") != -1) {
            window.location.href = displayCodePage + "?code=" + encodeURI(fullCodePath);
        } else {
            window.location.href = fullCodePath;
        }
    }
/* ]]> */    
</script>


    </head>
<body onload="load()">
    <noscript>
        这个页面需要一个启用 JavaScript 的浏览器才能正常运行。
    </noscript>
        <!-- header -->
    <div class="header-container">
        <div class="bookwrapper  clearfix">       
            <div id="brandProdName">
                <div id="logocover"></div>
                <div id="productName" >文档</div>
            </div> 
            <br class="clearfloat" />
        </div>
    </div>
    
    <div id="TopBar">
        <div id="TopBar_tr">
            <div id="TopBar_tl">
                <div id="TopBar_br"> <div id="TopBar_bl"> 
                    <div id="TopBar_left">Java™ 教程-Java Tutorials 中文版</div>
                        <div id="TopBar_right"><!--
                            <a href="URL" target="_blank">External Link</a><br/>
                            --> 
                             
                            <a href="javascript:toggleLeft()" id="ToggleLeft">隐藏目录</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="LeftBar" class="LeftBar_shown">
        <div id="Contents">
            <div class="linkLESSON"><a href="index.html">JDBC 基础知识</a></div>
<div class="linkAHEAD"><a href="gettingstarted.html">入门</a></div>
<div class="linkAHEAD"><a href="processingsqlstatements.html">使用 JDBC 处理 SQL 语句</a></div>
<div class="linkAHEAD"><a href="connecting.html">建立连接</a></div>
<div class="linkAHEAD"><a href="sqldatasources.html">连接 DataSource 对象</a></div>
<div class="linkAHEAD"><a href="sqlexception.html">处理 SQLExceptions</a></div>
<div class="linkAHEAD"><a href="tables.html">设置表</a></div>
<div class="linkAHEAD"><a href="retrieving.html">从结果集中获取和修改值</a></div>
<div class="nolinkAHEAD">使用准备好的语句</div>
<div class="linkAHEAD"><a href="transactions.html">使用事务</a></div>
<div class="linkAHEAD"><a href="rowset.html">使用 RowSet 对象</a></div>
<div class="linkAHEAD"><a href="jdbcrowset.html">使用 JdbcRowSet 对象</a></div>
<div class="linkAHEAD"><a href="cachedrowset.html">使用 CachedRowSet 对象</a></div>
<div class="linkAHEAD"><a href="joinrowset.html">使用 JoinRowSet 对象</a></div>
<div class="linkAHEAD"><a href="filteredrowset.html">使用 FilteredRowSet 对象</a></div>
<div class="linkAHEAD"><a href="webrowset.html">使用 WebRowSet 对象</a></div>
<div class="linkAHEAD"><a href="sqltypes.html">使用高级数据类型</a></div>
<div class="linkAHEAD"><a href="blob.html">使用大对象</a></div>
<div class="linkAHEAD"><a href="sqlxml.html">使用 SQLXML 对象</a></div>
<div class="linkAHEAD"><a href="array.html">使用数组对象</a></div>
<div class="linkAHEAD"><a href="distinct.html">使用 DISTINCT 数据类型</a></div>
<div class="linkAHEAD"><a href="sqlstructured.html">使用结构化对象</a></div>
<div class="linkAHEAD"><a href="sqlcustommapping.html">使用自定义类型映射</a></div>
<div class="linkAHEAD"><a href="sqldatalink.html">使用数据链接对象</a></div>
<div class="linkAHEAD"><a href="sqlrowid.html">使用 RowId 对象</a></div>
<div class="linkAHEAD"><a href="storedprocedures.html">使用存储过程</a></div>
<div class="linkAHEAD"><a href="jdbcswing.html">将 JDBC 与 GUI API 结合使用</a></div>
</div>
    </div>
    <div id="MainFlow" class="MainFlow_indented">
    <div class="PrintHeaders">
        <b>Trail:</b> JDBC(TM) Database Access
        <br /><b>Lesson:</b> JDBC Basics
    </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">主页</a>&gt;<a href="../index.html" target="_top">JDBC(TM) 数据库访问</a>&gt;<a href="index.html" target="_top">JDBC 基础知识</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="retrieving.html">«&nbsp;上一页</a>&nbsp;•&nbsp;<a target="_top" href="../TOC.html">路径</a>&nbsp;•&nbsp;<a target="_top" href="transactions.html">下一页&nbsp;»</a>
            </div>
            <div class="Banner"><p style="background-color: rgb(247, 248, 249); border-width: 1px; padding: 10px; font-style: italic; border-style: solid; border-color: rgb(64, 74, 91);">Java 教程是为 JDK 8 编写的。本页中描述的示例和实践未利用在后续版本中引入的改进。</p></div>
            <div id="PageTitle"><h1>使用准备好的语句</h1></div>
            <div id="PageContent">

<p>此页面包含以下主题：</p>
<ul>
<li><a href="#overview_ps">Overview of Prepared Statements</a></li>
<li><a href="#create_ps">Creating a PreparedStatement Object</a></li>
<li><a href="#supply_values_ps">Supplying Values for PreparedStatement Parameters</a></li>
</ul>
<h2><a name="overview_ps" id="overview_ps">Overview of Prepared Statements</a></h2>
<p>Sometimes it is more convenient to use a <code>PreparedStatement</code> object for sending SQL statements to the database. This special type of statement is derived from the more general class, <code>Statement</code>, that you already know.</p>
<p>If you want to execute a <code>Statement</code> object many times, it usually reduces execution time to use a <code>PreparedStatement</code> object instead.</p>
<p>The main feature of a <code>PreparedStatement</code> object is that, unlike a <code>Statement</code> object, it is given a SQL statement when it is created. The advantage to this is that in most cases, this SQL statement is sent to the DBMS right away, where it is compiled. As a result, the <code>PreparedStatement</code> object contains not just a SQL statement, but a SQL statement that has been precompiled. This means that when the <code>PreparedStatement</code> is executed, the DBMS can just run the <code>PreparedStatement</code> SQL statement without having to compile it first.</p>
<p>Although <code>PreparedStatement</code> objects can be used for SQL statements with no parameters, you probably use them most often for SQL statements that take parameters. The advantage of using SQL statements that take parameters is that you can use the same statement and supply it with different values each time you execute it. Examples of this are in the following sections.</p>
<p>The following method, <code><a href="gettingstarted.html">CoffeesTable.updateCoffeeSales</a></code>, stores the number of pounds of coffee sold in the current week in the <code>SALES</code> column for each type of coffee, and updates the total number of pounds of coffee sold in the <code>TOTAL</code> column for each type of coffee:</p>
<div class="codeblock"><pre>
public void updateCoffeeSales(HashMap&lt;String, Integer> salesForWeek)
    throws SQLException {

    PreparedStatement updateSales = null;
    PreparedStatement updateTotal = null;

    String updateString =
        "update " + dbName + ".COFFEES " +
        "set SALES = ? where COF_NAME = ?";

    String updateStatement =
        "update " + dbName + ".COFFEES " +
        "set TOTAL = TOTAL + ? " +
        "where COF_NAME = ?";

    try {
        con.setAutoCommit(false);
        updateSales = con.prepareStatement(updateString);
        updateTotal = con.prepareStatement(updateStatement);

        for (Map.Entry&lt;String, Integer> e : salesForWeek.entrySet()) {
            updateSales.setInt(1, e.getValue().intValue());
            updateSales.setString(2, e.getKey());
            updateSales.executeUpdate();
            updateTotal.setInt(1, e.getValue().intValue());
            updateTotal.setString(2, e.getKey());
            updateTotal.executeUpdate();
            con.commit();
        }
    } catch (SQLException e ) {
        JDBCTutorialUtilities.printSQLException(e);
        if (con != null) {
            try {
                System.err.print("Transaction is being rolled back");
                con.rollback();
            } catch(SQLException excep) {
                JDBCTutorialUtilities.printSQLException(excep);
            }
        }
    } finally {
        if (updateSales != null) {
            updateSales.close();
        }
        if (updateTotal != null) {
            updateTotal.close();
        }
        con.setAutoCommit(true);
    }
}
</pre></div><!-- ************************* -->

<h2><a name="create_ps" id="create_ps">Creating a PreparedStatement Object</a></h2>
<p>The following creates a <code>PreparedStatement</code> object that takes two input parameters:</p>
<div class="codeblock"><pre>
String updateString =
    "update " + dbName + ".COFFEES " +
    "set SALES = ? where COF_NAME = ?";
updateSales = con.prepareStatement(updateString);
</pre></div><!-- ************************* -->

<h2><a name="supply_values_ps" id="supply_values_ps">Supplying Values for PreparedStatement Parameters</a></h2>
<p>You must supply values in place of the question mark placeholders (if there are any) before you can execute a <code>PreparedStatement</code> object. Do this by calling one of the setter methods defined in the <code>PreparedStatement</code> class. The following statements supply the two question mark placeholders in the <code>PreparedStatement</code> named <code>updateSales</code>:</p>
<div class="codeblock"><pre>
updateSales.setInt(1, e.getValue().intValue());
updateSales.setString(2, e.getKey());
</pre></div>
<p>The first argument for each of these setter methods specifies the question mark placeholder. In this example, <code>setInt</code> specifies the first placeholder and <code>setString</code> specifies the second placeholder.</p>
<p>After a parameter has been set with a value, it retains that value until it is reset to another value, or the method <code>clearParameters</code> is called. Using the <code>PreparedStatement</code> object <code>updateSales</code>, the following code fragment illustrates reusing a prepared statement after resetting the value of one of its parameters and leaving the other one the same:</p>
<div class="codeblock"><pre>
<strong>// changes SALES column of French Roast
//row to 100</strong>

updateSales.setInt(1, 100);
updateSales.setString(2, "French_Roast");
updateSales.executeUpdate();

<strong>// changes SALES column of Espresso row to 100
// (the first parameter stayed 100, and the second
// parameter was reset to "Espresso")</strong>

updateSales.setString(2, "Espresso");
updateSales.executeUpdate();
</pre></div><!-- ************************* -->

<h3>Using Loops to Set Values</h3>
<p>You can often make coding easier by using a <code>for</code> loop or a <code>while</code> loop to set values for input parameters.</p>
<p>The <code><a href="gettingstarted.html">CoffeesTable.updateCoffeeSales</a></code> method uses a for-each loop to repeatedly set values in the <code>PreparedStatement</code> objects <code>updateSales</code> and <code>updateTotal</code>:</p>
<div class="codeblock"><pre>
for (Map.Entry&lt;String, Integer> e : salesForWeek.entrySet()) {

    updateSales.setInt(1, e.getValue().intValue());
    updateSales.setString(2, e.getKey());

    // ...
}
</pre></div>
<p>The method <code><a href="gettingstarted.html">CoffeesTable.updateCoffeeSales</a></code> takes one argument, <code>HashMap</code>. Each element in the <code>HashMap</code> argument contains the name of one type of coffee and the number of pounds of that type of coffee sold during the current week. The for-each loop iterates through each element of the <code>HashMap</code> argument and sets the appropriate question mark placeholders in <code>updateSales</code> and <code>updateTotal</code>.</p><!-- ************************* -->

<h2><a name="execute_ps" id="execute_ps">Executing PreparedStatement Objects</a></h2>
<p>As with <code>Statement</code> objects, to execute a <code>PreparedStatement</code> object, call an execute statement: <code>executeQuery</code> if the query returns only one <code>ResultSet</code> (such as a <code>SELECT</code> SQL statement), <code>executeUpdate</code> if the query does not return a <code>ResultSet</code> (such as an <code>UPDATE</code> SQL statement), or <code>execute</code> if the query might return more than one <code>ResultSet</code> object. Both <code>PreparedStatement</code> objects in <code><a href="gettingstarted.html">CoffeesTable.updateCoffeeSales</a></code> contain <code>UPDATE</code> SQL statements, so both are executed by calling <code>executeUpdate</code>:</p>
<div class="codeblock"><pre>
updateSales.setInt(1, e.getValue().intValue());
updateSales.setString(2, e.getKey());
<strong>updateSales.executeUpdate();</strong>

updateTotal.setInt(1, e.getValue().intValue());
updateTotal.setString(2, e.getKey());
<code>updateTotal.executeUpdate();</code>
con.commit();
</pre></div>
<p>No arguments are supplied to <code>executeUpdate</code> when they are used to execute <code>updateSales</code> and <code>updateTotals</code>; both <code>PreparedStatement</code> objects already contain the SQL statement to be executed.</p>
<p><strong>注意</strong>:At the beginning of <code>CoffeesTable.updateCoffeeSales</code>, the auto-commit mode is set to false:</p>
<div class="codeblock"><pre>
con.setAutoCommit(false);
</pre></div>
<p>Consequently, no SQL statements are committed until the method <code>commit</code> is called. For more information about the auto-commit mode, see 
<a class="TutorialLink" target="_top" href="transactions.html">Transactions</a>.</p><!-- ************************* -->

<h3>Return Values for the executeUpdate Method</h3>
<p>Whereas <code>executeQuery</code> returns a <code>ResultSet</code> object containing the results of the query sent to the DBMS, the return value for <code>executeUpdate</code> is an <code>int</code> value that indicates how many rows of a table were updated. For instance, the following code shows the return value of <code>executeUpdate</code> being assigned to the variable <code>n</code>:</p>
<div class="codeblock"><pre>
updateSales.setInt(1, 50);
updateSales.setString(2, "Espresso");
int n = updateSales.executeUpdate();
<strong>// n = 1 because one row had a change in it</strong>
</pre></div>
<p>The table <code>COFFEES</code> is updated; the value 50 replaces the value in the column <code>SALES</code> in the row for <code>Espresso</code>. That update affects one row in the table, so <code>n</code> is equal to 1.</p>
<p>When the method <code>executeUpdate</code> is used to execute a DDL (data definition language) statement, such as in creating a table, it returns the <code>int</code> value of 0. Consequently, in the following code fragment, which executes the DDL statement used to create the table <code>COFFEES</code>, <code>n</code> is assigned a value of 0:</p>
<div class="codeblock"><pre>
<strong>// n = 0</strong>
int n = executeUpdate(createTableCoffees); 
</pre></div>
<p>Note that when the return value for <code>executeUpdate</code> is 0, it can mean one of two things:</p>
<ul>
<li>The statement executed was an update statement that affected zero rows.</li>
<li>The statement executed was a DDL statement.</li>
</ul>


        </div>
        <div class="NavBit">
            <a target="_top" href="retrieving.html">« 上一页</a>•<a target="_top" href="../TOC.html">路径</a>•<a target="_top" href="transactions.html">下一页 »</a>
        </div>
    </div>
    
<hr class="clearfloat"/>

<div id="Footer">

<p class="footertext">
<a href="http://www.oracle.com/corporate/index.html">About Oracle</a>| <a href="http://www.oracle.com/us/corporate/contact/index.html">Contact Us</a> | <a href="http://www.oracle.com/us/legal/index.html">Legal Notices</a> | <a href="http://www.oracle.com/us/legal/terms/index.html">Terms of Use</a> | <a href="http://www.oracle.com/us/legal/privacy/index.html">Your Privacy Rights</a> | <a href="https://www.pingfangx.com/xx/translation/java_tutorial">关于汉化</a></p>

<p class="footertext"><a href="http://www.oracle.com/pls/topic/lookup?ctx=cpyr&id=en-US">

Copyright © 1995, 2017 Oracle and/or its affiliates. All rights reserved.</a></p>
       
</div>    
    <div class="PrintHeaders">
        <b>Previous page:</b> Retrieving and Modifying Values from Result Sets
        <br /><b>Next page:</b> Using Transactions
    </div>
</body>
</html> 
