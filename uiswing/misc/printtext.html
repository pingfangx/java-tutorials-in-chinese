<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    

<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>如何打印文本(Java™ 教程-Java Tutorials 中文版&gt;使用 JFC/Swing 创建 GUI&gt;使用其他 Swing 功能)
</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
     <meta name="description" content="This Swing Java Tutorial describes developing graphical user interfaces (GUIs) for applications and applets using Swing components" />
     <meta name="keywords" content="java programming, learn java, java sample code, java swing, java ui, java user interface, swing components, swing events, swing layout  " />
        
<style type="text/css">
    body {
        margin-left:10px;
        margin-right:10px;
        line-height: 1.5;
        FONT-FAMILY: Arial, Helvetica, sans-serif; 
        font-size: 0.8em;
    }
    
    a:link{text-decoration:none; color:#09569d;}
    a:visited{text-decoration:none; color: #3a87cf;}
    a:hover{text-decoration:underline; }
        
    code{
        font-family:Monaco,Courier,"Courier New";
    }
    
    .header-container {
        background-color: #fff;
        border-bottom: 1px solid #C1CFDA;
        -webkit-box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
        box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
    }
    
    .bookwrapper {
        width: auto;
        margin: auto;
    }
    
    .clearfix {
    }
    
    .clearfloat {
        clear: both;
        overflow: auto;
        height: 0px;
        font-size: 1px;
        line-height: 0px;
    }
    
    #brandProdName {
        width: auto;
        height: auto;
    }
    
    #logocover {
        display: block;
        background: transparent url(../../images/oracle-java-logo.png) 0px 0px no-repeat;
        height: 50px;
        width: 229px;
        float: left;
    }
    
    #productName {
        font-size: 16px;
        position: relative;
        top: 19px;
        padding-left: 3px;
        color: #457798;
        white-space: nowrap;
        width: 340px;
    }


    .FigureCaption   { 
        font-family: sans-serif; 
        text-align: center;
    }
    
    #TopBar_bl {        
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        margin-left: -110px;
        margin-right: -100px;       
		align: left;
        height: 60px;
    }
    #TopBar_tr {
        width: 100%;
        height: 60px;
    }
    
    #TopBar {
        min-width:700px;
        padding:25px 100px 10px;
        margin-bottom:25px;
        clear:both;
        
        border-bottom:1px solid #d2dde5;
        border-radius: 3px;
    
        background:#efefef; /* Old browsers */
        /* IE9 SVG, needs conditional override of 'filter' to 'none' */
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMmVmZjkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        background: -moz-linear-gradient(top,  #ffffff 0%, #e2eff9 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#e2eff9)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* IE10+ */
        background: linear-gradient(to bottom,  #ffffff 0%,#e2eff9 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e2eff9',GradientType=0 ); /* IE6-8 */
        
    }
    
    #TopBar_left {
        line-height: 14px;
        position: absolute;
        padding-top: 30px;
        padding-right: 30px;
        padding-left: 30px;
        text-align: left;
        font: 13px/20px Arial, Helvetica, sans-serif;
        font-weight: bold;
        font-size: 20px;
        color: #333;
    }
    
    #TopBar_right {
        line-height: 12px;
        float: right;
        padding-top: 10px;
        padding-right: 30px;
        text-align: left;
    }
    

    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    
     
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 10px;
        margin: 3px;
        padding: 0;
    }
 
    #BreadCrumbs {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    
    #BreadCrumbs a {
        color:#09569d;
    }
    
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }
    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    
    .LeftBar_shown {
        width: 13em;
        float: left;
    }
    
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    
    .LeftBar_hidden {
        display: none;
    }
    
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;       
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }

    .NavBit  {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    
    @media print {
        .NavBit {
            display: none;
        }
    }
    
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    
    #Contents a, .NavBit a, #TagNotes a {
        color:#09569d;
    }
    
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em;
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #333;
		
		
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
	
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #333;
        
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
		font-size:12px;
		font-family:Monaco,Courier,"Courier New";
    }
    
    .tocli {
        list-style-type:none;
    }

    .betadraft {
        color: red;
    }

</style>
<script type="text/javascript">
/* <![CDATA[ */
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }

    function showCode(displayCodePage, codePath) {
        var codePathEls = codePath.split("/");
        var currDocPathEls = location.href.split("/");
        //alert ("codePathEls = " + codePathEls + "\n" + "currDocPathEls = " + currDocPathEls);
        currDocPathEls.pop(); // remove file name at the end
        while (codePathEls.length > 0) {
            if (codePathEls[0] == "..") {
                codePathEls.shift();
                currDocPathEls.pop();
            } else {
                break;
            }
        }
        var fullCodePath = currDocPathEls.join("/") + "/" + codePathEls.join("/");
        //alert ("fullCodePath = " + fullCodePath );
        if (codePath.indexOf(".java") != -1 || codePath.indexOf(".jnlp") != -1) {
            window.location.href = displayCodePage + "?code=" + encodeURI(fullCodePath);
        } else {
            window.location.href = fullCodePath;
        }
    }
/* ]]> */    
</script>


    </head>
<body onload="load()">
    <noscript>
        这个页面需要一个启用 JavaScript 的浏览器才能正常运行。
    </noscript>
        <!-- header -->
    <div class="header-container">
        <div class="bookwrapper  clearfix">       
            <div id="brandProdName">
                <div id="logocover"></div>
                <div id="productName" >文档</div>
            </div> 
            <br class="clearfloat" />
        </div>
    </div>
    
    <div id="TopBar">
        <div id="TopBar_tr">
            <div id="TopBar_tl">
                <div id="TopBar_br"> <div id="TopBar_bl"> 
                    <div id="TopBar_left">Java™ 教程-Java Tutorials 中文版</div>
                        <div id="TopBar_right"><!--
                            <a href="URL" target="_blank">External Link</a><br/>
                            --> 
                             
                            <a href="javascript:toggleLeft()" id="ToggleLeft">隐藏目录</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="LeftBar" class="LeftBar_shown">
        <div id="Contents">
            <div class="linkLESSON"><a href="index.html">使用其他 Swing 功能</a></div>
<div class="linkAHEAD"><a href="desktop.html">如何与桌面类集成</a></div>
<div class="linkAHEAD"><a href="trans_shaped_windows.html">如何创建半透明和形状的 Windows</a></div>
<div class="linkAHEAD"><a href="jlayer.html">如何使用 JLayer 类装饰组件</a></div>
<div class="linkAHEAD"><a href="action.html">如何使用动作</a></div>
<div class="linkAHEAD"><a href="timer.html">如何使用 Swing 计时器</a></div>
<div class="linkAHEAD"><a href="access.html">如何支持辅助技术</a></div>
<div class="linkAHEAD"><a href="focus.html">如何使用焦点子系统</a></div>
<div class="linkAHEAD"><a href="keybinding.html">如何使用键绑定</a></div>
<div class="linkAHEAD"><a href="modality.html">如何在对话框中使用模态</a></div>
<div class="linkAHEAD"><a href="printtable.html">如何打印表格</a></div>
<div class="nolinkAHEAD">如何打印文本</div>
<div class="linkAHEAD"><a href="splashscreen.html">如何创建启动画面</a></div>
<div class="linkAHEAD"><a href="systemtray.html">如何使用系统托盘</a></div>
<div class="linkAHEAD"><a href="problems.html">使用其他 Swing 特性解决常见问题</a></div>
</div>
    </div>
    <div id="MainFlow" class="MainFlow_indented">
    <div class="PrintHeaders">
        <b>Trail:</b> Creating a GUI With JFC/Swing
        <br /><b>Lesson:</b> Using Other Swing Features
    </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">主页</a>&gt;<a href="../index.html" target="_top">使用 JFC/Swing 创建 GUI</a>&gt;<a href="index.html" target="_top">使用其他 Swing 功能</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="printtable.html">«&nbsp;上一页</a>&nbsp;•&nbsp;<a target="_top" href="../TOC.html">路径</a>&nbsp;•&nbsp;<a target="_top" href="splashscreen.html">下一页&nbsp;»</a>
            </div>
            <div class="Banner"><p style="background-color: rgb(247, 248, 249); border-width: 1px; padding: 10px; font-style: italic; border-style: solid; border-color: rgb(64, 74, 91);">Java 教程是为 JDK 8 编写的。本页中描述的示例和实践未利用在后续版本中引入的改进。</p></div>
            <div id="PageTitle"><h1>如何打印文本</h1></div>
            <div id="PageContent">

<p>The <code>JTextComponent</code> class provides support for printing text documents. The <code>JTextComponent</code> API includes methods that allow you to implement both basic and advanced printing tasks. Supported formats include HTML, RTF, and plain text. For common printing tasks such as simply printing a text document, use the <code>print</code> method directly. The <code>print</code> method has several forms with various argument sets. This method prepares your text document, gets a corresponding <code>Printable</code> object, and sends it to a printer.</p>
<p>If the default implementation of the <code>Printable</code> object does not meet your needs, you can customize the printing layout by overriding the <code>getPrintable</code> method to wrap the default <code>Printable</code> or even replace it altogether.</p>
<p>The easiest way to print your text component is to call the <code>print</code> method without parameters. See the code example below.</p>
<div class="codeblock"><pre>
try {
    boolean complete = textComponent.print();
    if (complete) {
        /* show a success message  */
        ...
    } else {
        /*show a message indicating that printing was cancelled */
        ...
    }
} catch (PrinterException pe) {
    /* Printing failed, report to the user */
    ...
}
</pre></div>
<p>When you call the <code>print</code> method with no parameters, a print dialog is displayed, and then your text component is printed interactively without a header or a footer. The code example below shows the <code>print</code> method signature with the complete set of arguments.</p>
<div class="codeblock"><pre>
boolean complete = textComponent.print(MessageFormat headerFormat,
                                       MessageFormat footerFormat, 
                                       boolean showPrintDialog,
                                       PrintService service
                                       PrintRequestAttributeSet attributes,
                                       boolean interactive);
</pre></div>
<p>When you call the <code>print</code> method with all arguments, you explicitly choose printing features such as header and footer text, printing attributes, a destination print service, and also whether to show a print dialog or not, and whether to print interactively or non-interactively. To decide which parameters suit your needs best, see the description of available features below.</p>
<p>The <code>JTextComponent</code> printing API provides the following features:</p>
<ul>
<li><a href="#interactively">Printing Interactively or Non-interactively</a></li>
<li><a href="#dialog">Displaying a Print Dialog</a></li>
<li><a href="#header">Adding a Header or a Footer (or Both) to a Printing Layout</a></li>
<li><a href="#layout">Automatic Layout and Pagination</a></li>
</ul>
<h2><a name="interactively" id="interactively">Printing Interactively or Non-interactively</a></h2>
<p>In interactive mode a progress dialog with an abort option is shown for the duration of printing. Here is a sample of a progress dialog.</p>
<center><img src="../../figures/uiswing/misc/PrintingProgress.png" width="268" height="122" align="bottom" alt="A screenshot of a printing progress dialog" /></center><p>This dialog allows the user to keep track of printing progress. The progress dialog is modal when the <code>print</code> method is called on the event dispatch thread and non-modal otherwise. It is important that your document remain unchanged while being printed, otherwise the printing behavior is undefined. The <code>print</code> method ensures that your document will not be changed and disables the component for the duration of printing.</p>
<p>If you call the <code>print</code> method on the event dispatch thread in non-interactive mode, then all events including repaints will be blocked. That is why printing non-interactively on EDT is only recommended for applications with non-visible GUI.</p>
<h2><a name="dialog" id="dialog">Print Dialog</a></h2>
<p>You can display a standard print dialog which allows the user to do the following:</p>
<ul>
<li>Select a printer</li>
<li>Specify number of copies</li>
<li>Change printing attributes</li>
<li>Cancel printing before it has been started</li>
<li>Start printing</li>
</ul>
<center><img src="../../figures/uiswing/misc/PrintingDialog.png" width="425" height="403" align="bottom" alt="A screenshot of a printing dialog" /></center><p>You may notice that the print dialog does not specify the total number of pages in the printout. This is because the text printing implementation uses the <code>Printable</code> API and the total number of pages is not known before printing time.</p>
<h2><a name="header" id="header">Adding a Header or a Footer (or Both) to a Printing Layout</a></h2>
<p>Headers and footers are provided by 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/java/text/MessageFormat.html"><code>MessageFormat</code></a> parameters. These parameters allow the header and footer to be localized. Read the documentation for the 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/java/text/MessageFormat.html"><code>MessageFormat</code></a> class as characters such as single quotes are special and need to be avoided. Both headers and footers are centered. You can insert a page number by using <code>{0}</code>.</p>
<p><code>MessageFormat footer = new MessageFormat("Page - {0}");</code></p>
<p>Since the total number of pages in the output is not known before printing time, there is no way to specify a numbering format like "Page 1 of 5".</p>
<h2><a name="layout" id="layout">Automatic Layout and Pagination</a></h2>
<p><a name="layout__1" id="layout__1">With the use of the <code>JTextComponent</code> printing API you do not need to take care of layout and pagination. Both layout and pagination are done automatically. The document content is formatted to fit the page size and spreads across multiple pages. You only need to specify an appropriate footer text format to the <code>print</code> method if you want to insert a page number in the footer. As demonstrated earlier, you can specify the page number in your footer by including <code>"{0}"</code> in the string given to the <code>MessageFormat</code> footer parameter. In the printed output, {0} will be replaced by the current page number.</a></p>
<h2><a name="layout__2" id="layout__2"></a><a name="example1" id="example1">Text Area Printing Example</a></h2>
<p><a name="layout__3" id="layout__3">Let us look at an example called <code>TextAreaPrintingDemo</code>. The main feature of this demo is printing a text document either on the event dispatch thread or on a background thread depending on the user's choice. This demo displays a text area, allows to select several printing features, and prints the text area's content according to the selected options. The entire code for this program can be found in 
</a><a class="SourceLink" target="_blank" href="../examples/misc/TextAreaPrintingDemoProject/src/misc/TextAreaPrintingDemo.java" onclick="showCode('../../displayCode.html', '../examples/misc/TextAreaPrintingDemoProject/src/misc/TextAreaPrintingDemo.java'); return false;"><code>TextAreaPrintingDemo.java</code></a>. This demo's rich GUI is built in the 
<a class="OutsideLink" target="_blank" href="http://netbeans.org/kb/docs/java/quickstart-gui.html">NetBeans IDE GUI builder</a>. Here is a picture of the <code>TextAreaPrintingDemo</code> application.</a></p>
<center><img src="../../figures/uiswing/misc/TextAreaPrintingDemo.png" width="685" height="461" align="bottom" alt="A screenshot of TextAreaPrintingDemo" /></center><div class="note"><hr /><strong>试试这个:</strong>&nbsp;<ol>
<li>Click the Launch button to run TextAreaPrintingDemo using 
<a class="OutsideLink" target="_blank" href="http://www.oracle.com/technetwork/java/javase/javawebstart/index.html">Java™ Web Start </a> (<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">download JDK 7 or later</a>). Alternatively, to compile and run the example yourself, consult the <a href="../examples/misc/index.html#TextAreaPrintingDemo">example index</a>.<a href="https://docs.oracle.com/javase/tutorialJWS/samples/uiswing/TextAreaPrintingDemoProject/TextAreaPrintingDemo.jnlp"><img src="../../images/jws-launch-button.png" width="88" height="23" align="bottom" alt="Launches the TextAreaPrintingDemo Application" /></a><br /></li>
<li>Edit the text in the Header or Footer checkboxes or both to provide a different header or footer.</li>
<li>Clear the Show Progress Dialog checkbox if you want to print without displaying a progress dialog, which means printing non-interactively. Note that you will not be able to cancel printing once it has been started.</li>
<li>Clear the Print in Background checkbox to select printing on the event dispatch thread. Note that printing on EDT non-interactively will make your application unresponsive — interaction with your application will be blocked for the duration of the printing process.</li>
<li>Click the Print button to print the text area's content according to the selected options.</li>
</ol>
<p>Whenever a web-launched application tries to print, Java Web Start opens up a security dialog asking the user for permission to print unless this permission has already been granted in the system settings. To proceed with printing the user has to accept the request.</p>
<p>An action listener is registered for the Print button. As the user clicks the Print button the <code>actionPerformed</code> method calls the <code>print</code> method, which initiates a printing task. The printing task is a <code>SwingWorker</code> object. The code example below shows how the <code>PrintingTask</code> class is implemented.</p>
<div class="codeblock"><pre>
private class PrintingTask extends SwingWorker&lt;Object, Object&gt; {
    private final MessageFormat headerFormat;
    private final MessageFormat footerFormat;
    private final boolean interactive;
    private volatile boolean complete = false;
    private volatile String message;
        
    public PrintingTask(MessageFormat header, MessageFormat footer,
                        boolean interactive) {
        this.headerFormat = header;
        this.footerFormat = footer;
        this.interactive = interactive;
    }
        
    @Override
    protected Object doInBackground() {
        try {
            complete = text.print(headerFormat, footerFormat,
                    true, null, null, interactive);
            message = "Printing " + (complete ? "complete" : "canceled");
        } catch (PrinterException ex) {
            message = "Sorry, a printer error occurred";
        } catch (SecurityException ex) {
            message =
                "Sorry, cannot access the printer due to security reasons";
        }
        return null;
    }
        
    @Override
    protected void done() {
        message(!complete, message);
    }
}
</pre></div>
<p>The code example below shows how the <code>print</code> method obtains the set of selected options from the GUI components, then creates an instance of the <code>PrintingTask</code> class, and performs printing.</p>
<div class="codeblock"><pre>
private void print(java.awt.event.ActionEvent evt) {
        MessageFormat header = createFormat(headerField);
        MessageFormat footer = createFormat(footerField);
        boolean interactive = interactiveCheck.isSelected();
        boolean background = backgroundCheck.isSelected();

        PrintingTask task = new PrintingTask(header, footer, interactive);
        <b>if (background) {
            task.execute();
        } else {
            task.run()
        }</b>
    }
</pre></div>
<p>The code in bold illustrates how <code>PrintingTask</code>'s methods are invoked depending on the <code>background</code> parameter's value. Whenever the user prefers to print on a background thread, the <code>execute</code> method is called, which schedules the printing task for the execution on a background thread. Otherwise the <code>run</code> method performs the printing task on EDT.</p>
<p>Since printing large documents is a time-consuming task, it is recommended to perform printing on a background thread.</p>
<h2><a name="example2" id="example2">Text Batch Printing Example</a></h2>
<p><a name="example2__1" id="example2__1">The <code>TextBatchPrintingDemo</code> example illustrates printing non-visible HTML text documents on background threads. When launched, this demo displays a page with a list of URLs. You can visit an HTML page, add the displayed page to the print list, and once you select all pages that you need, you can print them all at once on background threads. The entire code for this program can be found in 
</a><a class="SourceLink" target="_blank" href="../examples/misc/TextBatchPrintingDemoProject/src/misc/TextBatchPrintingDemo.java" onclick="showCode('../../displayCode.html', '../examples/misc/TextBatchPrintingDemoProject/src/misc/TextBatchPrintingDemo.java'); return false;"><code>TextBatchPrintingDemo.java</code></a>. Here is a picture of the <code>TextBatchPrintingDemo</code> application.</a></p>
<center><img src="../../figures/uiswing/misc/TextBatchPrintingDemo.png" width="723" height="487" align="bottom" alt="A screenshot of TextBatchPrintingDemo" /></center><div class="note"><hr /><strong>试试这个:</strong>&nbsp;<ol>
<li>Click the Launch button to run TextBatchPrintingDemo using 
<a class="OutsideLink" target="_blank" href="http://www.oracle.com/technetwork/java/javase/javawebstart/index.html">Java™ Web Start </a> (<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">download JDK 7 or later</a>). Alternatively, to compile and run the example yourself, consult the <a href="../examples/misc/index.html#TextBatchPrintingDemo">example index</a>.<a href="https://docs.oracle.com/javase/tutorialJWS/samples/uiswing/TextBatchPrintingDemoProject/TextBatchPrintingDemo.jnlp"><img src="../../images/jws-launch-button.png" width="88" height="23" align="bottom" alt="Launches the TextBatchPrintingDemo Application" /></a><br /></li>
<li>Click on any link to view the corresponding HTML page.</li>
<li>Press ALT+A or choose File&gt;Add Page menu item to add the displayed page to a print list shown on the right.</li>
<li>Press ALT+H or choose File&gt;Home Page menu item to return to the demo's home page.</li>
<li>Add as many pages to the print list as you need.</li>
<li>Press ALT+C or choose File&gt;Clear Selected menu item if you need to clear the print list and build at again.</li>
<li>Press ALT+P or choose File&gt;Print Selected menu item to print the selected pages.</li>
<li>Press ALT+Q or choose File&gt;Quit menu item to quit the application.</li>
</ol>
<p>You can find the printing code in the <code>printSelectedPages</code> method. When called, this method first obtains the amount of pages selected for printing. The code example below shows how the <code>printSelectedPages</code> method creates a <code>Runnable</code> object for each page and then prints the current page on a separate thread.</p>
<div class="codeblock"><pre>
for (int i = 0; i &lt; n; i++) {
    final PageItem item = (PageItem) pages.getElementAt(i);
    // This method is called from EDT.  Printing is a time-consuming
    // task, so it should be done outside EDT, in a separate thread.
    Runnable printTask = new Runnable() {
        public void run() {
            try {
                item.print(
                        // Two "false" args mean "no print dialog" and
                        // "non-interactive" (ie, batch-mode printing).
                                null, null, false, printService, null, false);
            } catch (PrinterException pe) {
                JOptionPane.showMessageDialog(null,
                        "Error printing " + item.getPage() + "\n" + pe,
                        "Print Error", JOptionPane.WARNING_MESSAGE);
            }
        }
    };
    new Thread(printTask).start();
</pre></div>
<h2>Text Printing API</h2>
<p>This section lists methods defined in the <code>JTextComponent</code> class that allow you to print text documents.</p>
<table border="1" summary="JTextComponent methods for printing text">
<tr>
<th align="center">方法</th>
<th align="center">目的</th>
</tr>
<tr>
<td>
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/swing/text/JTextComponent.html#print--">boolean print()</a><br />
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/swing/text/JTextComponent.html#print-java.text.MessageFormat-java.text.MessageFormat-">boolean print(MessageFormat, MessageFormat)</a><br />
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/swing/text/JTextComponent.html#print-java.text.MessageFormat-java.text.MessageFormat-boolean-javax.print.PrintService-javax.print.attribute.PrintRequestAttributeSet-boolean-">boolean print(MessageFormat, MessageFormat, boolean, PrintRequestAttributeSet, boolean, PrintService)</a></td>
<td>When called without arguments, displays a print dialog, and then prints this text component interactively without a header or a footer text. Returns <code>true</code> if the user continued printing and <code>false</code> if the user cancelled printing.<br />

When called with the two <code>MessageFormat</code> arguments, displays a print dialog, and then prints this text component interactively with the specified header and footer text.<br />

When called with a full set of arguments, prints this text component according to the specified arguments. The two <code>MessageFormat</code> arguments specify header and footer text. The first boolean argument defines whether to show a print dialog or not. Another boolean argument specifies whether to print interactively or not. With two other arguments you can specify printing attributes and a print service.<br />

Whenever a <code>PrintService</code> argument is omitted, the default printer will be used.</td>
</tr>
<tr>
<td>
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/swing/text/JTextComponent.html#getPrintable-java.text.MessageFormat-java.text.MessageFormat-">Printable getPrintable(MessageFormat, MessageFormat)</a></td>
<td>Returns a <code>Printable</code> object for printing your text component. Override this method to get a customized Printable object. You can wrap one Printable object into another in order to obtain complex reports and documents.</td>
</tr>
</table>
<h2><a name="eg" id="eg">Examples That Use Text Printing</a></h2>
<p>This table lists examples that use text printing and points to where those examples are described.</p>
<table summary="list of examples that use text printing">
<tr>
<th align="left">例子</th>
<th align="left">Where Described</th>
<th align="left">Notes</th>
</tr>
<tr>
<td valign="top"><a href="../examples/misc/index.html#TextAreaPrintingDemo"><code>TextAreaPrintingDemo</code></a></td>
<td valign="top">This page</td>
<td valign="top">Demonstrates the basics of text printing and provides a rich GUI. Allows the user to specify header or footer text, turn the print dialog on or off, select printing interactively or non-interactively, and then print according to the selected options.</td>
</tr>
<tr>
<td valign="top"><a href="../examples/misc/index.html#TextBatchPrintingDemo"><code>TextBatchPrintingDemo</code></a></td>
<td valign="top">This page</td>
<td valign="top">This demo displays a text component with a list of URLs, allows the user to view HTML pages, add them to the print list, and print all selected pages at once on background threads.</td>
</tr>
</table>


        </div>
        <div class="NavBit">
            <a target="_top" href="printtable.html">« 上一页</a>•<a target="_top" href="../TOC.html">路径</a>•<a target="_top" href="splashscreen.html">下一页 »</a>
        </div>
    </div>
    
<hr class="clearfloat"/>

<div id="Footer">

<p class="footertext">
<a href="http://www.oracle.com/corporate/index.html">About Oracle</a>| <a href="http://www.oracle.com/us/corporate/contact/index.html">Contact Us</a> | <a href="http://www.oracle.com/us/legal/index.html">Legal Notices</a> | <a href="http://www.oracle.com/us/legal/terms/index.html">Terms of Use</a> | <a href="http://www.oracle.com/us/legal/privacy/index.html">Your Privacy Rights</a> | <a href="https://www.pingfangx.com/xx/translation/java_tutorial">关于汉化</a></p>

<p class="footertext"><a href="http://www.oracle.com/pls/topic/lookup?ctx=cpyr&id=en-US">

Copyright © 1995, 2017 Oracle and/or its affiliates. All rights reserved.</a></p>
       
</div>    
    <div class="PrintHeaders">
        <b>Previous page:</b> How to Print Tables
        <br /><b>Next page:</b> How to Create a Splash Screen
    </div>
</div></div></body>
</html> 
