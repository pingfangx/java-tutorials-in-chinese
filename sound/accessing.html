<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    

<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>访问音频系统资源(Java™ 教程-Java Tutorials 中文版&gt;声音)
</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
     <meta name="description" content="" />
     <meta name="keywords" content="java programming, learn java, java sample code, " />
        
<style type="text/css">
    body {
        margin-left:10px;
        margin-right:10px;
        line-height: 1.5;
        FONT-FAMILY: Arial, Helvetica, sans-serif; 
        font-size: 0.8em;
    }
    
    a:link{text-decoration:none; color:#09569d;}
    a:visited{text-decoration:none; color: #3a87cf;}
    a:hover{text-decoration:underline; }
        
    code{
        font-family:Monaco,Courier,"Courier New";
    }
    
    .header-container {
        background-color: #fff;
        border-bottom: 1px solid #C1CFDA;
        -webkit-box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
        box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
    }
    
    .bookwrapper {
        width: auto;
        margin: auto;
    }
    
    .clearfix {
    }
    
    .clearfloat {
        clear: both;
        overflow: auto;
        height: 0px;
        font-size: 1px;
        line-height: 0px;
    }
    
    #brandProdName {
        width: auto;
        height: auto;
    }
    
    #logocover {
        display: block;
        background: transparent url(../images/oracle-java-logo.png) 0px 0px no-repeat;
        height: 50px;
        width: 229px;
        float: left;
    }
    
    #productName {
        font-size: 16px;
        position: relative;
        top: 19px;
        padding-left: 3px;
        color: #457798;
        white-space: nowrap;
        width: 340px;
    }


    .FigureCaption   { 
        font-family: sans-serif; 
        text-align: center;
    }
    
    #TopBar_bl {        
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        margin-left: -110px;
        margin-right: -100px;       
		align: left;
        height: 60px;
    }
    #TopBar_tr {
        width: 100%;
        height: 60px;
    }
    
    #TopBar {
        min-width:700px;
        padding:25px 100px 10px;
        margin-bottom:25px;
        clear:both;
        
        border-bottom:1px solid #d2dde5;
        border-radius: 3px;
    
        background:#efefef; /* Old browsers */
        /* IE9 SVG, needs conditional override of 'filter' to 'none' */
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMmVmZjkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        background: -moz-linear-gradient(top,  #ffffff 0%, #e2eff9 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#e2eff9)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* IE10+ */
        background: linear-gradient(to bottom,  #ffffff 0%,#e2eff9 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e2eff9',GradientType=0 ); /* IE6-8 */
        
    }
    
    #TopBar_left {
        line-height: 14px;
        position: absolute;
        padding-top: 30px;
        padding-right: 30px;
        padding-left: 30px;
        text-align: left;
        font: 13px/20px Arial, Helvetica, sans-serif;
        font-weight: bold;
        font-size: 20px;
        color: #333;
    }
    
    #TopBar_right {
        line-height: 12px;
        float: right;
        padding-top: 10px;
        padding-right: 30px;
        text-align: left;
    }
    

    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    
     
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 10px;
        margin: 3px;
        padding: 0;
    }
 
    #BreadCrumbs {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    
    #BreadCrumbs a {
        color:#09569d;
    }
    
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }
    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    
    .LeftBar_shown {
        width: 13em;
        float: left;
    }
    
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    
    .LeftBar_hidden {
        display: none;
    }
    
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;       
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }

    .NavBit  {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    
    @media print {
        .NavBit {
            display: none;
        }
    }
    
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    
    #Contents a, .NavBit a, #TagNotes a {
        color:#09569d;
    }
    
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em;
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #333;
		
		
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
	
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #333;
        
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
		font-size:12px;
		font-family:Monaco,Courier,"Courier New";
    }
    
    .tocli {
        list-style-type:none;
    }

    .betadraft {
        color: red;
    }

</style>
<script type="text/javascript">
/* <![CDATA[ */
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }

    function showCode(displayCodePage, codePath) {
        var codePathEls = codePath.split("/");
        var currDocPathEls = location.href.split("/");
        //alert ("codePathEls = " + codePathEls + "\n" + "currDocPathEls = " + currDocPathEls);
        currDocPathEls.pop(); // remove file name at the end
        while (codePathEls.length > 0) {
            if (codePathEls[0] == "..") {
                codePathEls.shift();
                currDocPathEls.pop();
            } else {
                break;
            }
        }
        var fullCodePath = currDocPathEls.join("/") + "/" + codePathEls.join("/");
        //alert ("fullCodePath = " + fullCodePath );
        if (codePath.indexOf(".java") != -1 || codePath.indexOf(".jnlp") != -1) {
            window.location.href = displayCodePage + "?code=" + encodeURI(fullCodePath);
        } else {
            window.location.href = fullCodePath;
        }
    }
/* ]]> */    
</script>


    </head>
<body onload="load()">
    <noscript>
        这个页面需要一个启用 JavaScript 的浏览器才能正常运行。
    </noscript>
        <!-- header -->
    <div class="header-container">
        <div class="bookwrapper  clearfix">       
            <div id="brandProdName">
                <div id="logocover"></div>
                <div id="productName" >文档</div>
            </div> 
            <br class="clearfloat" />
        </div>
    </div>
    
    <div id="TopBar">
        <div id="TopBar_tr">
            <div id="TopBar_tl">
                <div id="TopBar_br"> <div id="TopBar_bl"> 
                    <div id="TopBar_left">Java™ 教程-Java Tutorials 中文版</div>
                        <div id="TopBar_right"><!--
                            <a href="URL" target="_blank">External Link</a><br/>
                            --> 
                             
                            <a href="javascript:toggleLeft()" id="ToggleLeft">隐藏目录</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="LeftBar" class="LeftBar_shown">
        <div id="Contents">
            <div class="linkAHEAD"><a href="sampled-overview.html">采样包概述</a></div>
<div class="nolinkAHEAD">访问音频系统资源</div>
<div class="linkAHEAD"><a href="playing.html">播放音频</a></div>
<div class="linkAHEAD"><a href="capturing.html">捕获音频</a></div>
<div class="linkAHEAD"><a href="controls.html">使用控件处理音频</a></div>
<div class="linkAHEAD"><a href="converters.html">使用文件和格式转换器</a></div>
<div class="linkAHEAD"><a href="overview-MIDI.html">MIDI 包概述</a></div>
<div class="linkAHEAD"><a href="accessing-MIDI.html">访问 MIDI 系统资源</a></div>
<div class="linkAHEAD"><a href="MIDI-messages.html">发送和接收 MIDI 信息</a></div>
<div class="linkAHEAD"><a href="MIDI-seq-intro.html">序列器简介</a></div>
<div class="linkAHEAD"><a href="MIDI-seq-methods.html">使用序列器方法</a></div>
<div class="linkAHEAD"><a href="MIDI-seq-adv.html">使用高级序列器功能</a></div>
<div class="linkAHEAD"><a href="MIDI-synth.html">合成声音</a></div>
<div class="linkAHEAD"><a href="SPI-intro.html">服务提供者接口简介</a></div>
<div class="linkAHEAD"><a href="SPI-providing-sampled.html">提供采样音频服务</a></div>
<div class="linkAHEAD"><a href="SPI-providing-MIDI.html">提供 MIDI 服务</a></div>
</div>
    </div>
    <div id="MainFlow" class="MainFlow_indented">
    <div class="PrintHeaders">
        <b>Trail:</b> Sound
    </div>
            <div id="BreadCrumbs">
                <a href="../index.html" target="_top">主页</a>&gt;<a href="./index.html" target="_top">声音</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="sampled-overview.html">«&nbsp;上一页</a>&nbsp;•&nbsp;<a target="_top" href="./TOC.html">路径</a>&nbsp;•&nbsp;<a target="_top" href="playing.html">下一页&nbsp;»</a>
            </div>
            <div class="Banner"><p style="background-color: rgb(247, 248, 249); border-width: 1px; padding: 10px; font-style: italic; border-style: solid; border-color: rgb(64, 74, 91);">Java 教程是为 JDK 8 编写的。本页中描述的示例和实践未利用在后续版本中引入的改进。</p></div>
            <div id="PageTitle"><h1>访问音频系统资源</h1></div>
            <div id="PageContent">

<p>The Java Sound API takes a flexible approach to system configuration. Different sorts of audio devices (mixers) can be installed on a computer. The API makes few assumptions about what devices have been installed and what their capabilities are. Instead, it provides ways for the system to report about the available audio components, and ways for your program to access them.</p>
<p><a name="113098"></a>  The following sections show how your program can learn what sampled-audio resources have been installed on the computer, and how it can gain access to the available resources. Among other things, the resources include mixers and the various types of lines owned by the mixers.</p>
<p><a name="113101"></a></p>
<h2>The AudioSystem Class</h2>
<p><a name="113103"></a>  The 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/AudioSystem.html"><code>AudioSystem</code></a> class acts as a clearinghouse for audio components, including built-in services and separately installed services from third-party providers. <code>AudioSystem</code> serves as an application program's entry point for accessing these installed sampled-audio resources. You can query the <code>AudioSystem</code> to learn what sorts of resources have been installed, and then you can obtain access to them. For example, an application program might start out by asking the <code>AudioSystem</code> class whether there is a mixer that has a certain configuration, such as one of the input or output configurations illustrated earlier in the discussion of lines. From the mixer, the program would then obtain data lines, and so on.</p>
<p>Here are some of the resources an application program can obtain from the <code>AudioSystem</code>:</p>
<ul>
<li>Mixers — A system typically has multiple mixers installed. There is usually at least one for audio input and one for audio output. There might also be mixers that don't have I/O ports but instead accept audio from an application program and deliver the mixed audio back to the program. The <code>AudioSystem</code> class provides a list of all of the installed mixers.</li>
<li>Lines — Even though every line is associated with a mixer, an application program can get a line directly from the <code>AudioSystem</code>, without dealing explicitly with mixers.</li>
<li>Format conversions — An application program can use format conversions to translate audio data from one format to another.</li>
<li>Files and streams — The <code>AudioSystem</code> class provides methods for translating between audio files and audio streams. It can also report the file format of a sound file and can write files in different formats.</li>
</ul>
<h2>Information Objects</h2>
<p><a name="113125"></a>  Several classes in the Java Sound API provide useful information about associated interfaces. For example, 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/Mixer.Info.html"><code>Mixer.Info</code></a> provides details about an installed mixer, such as the mixer's vendor, name, description, and version. 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/Line.Info.html"><code>Line.Info</code></a> obtains the class of a specific line. Subclasses of <code>Line.Info</code> include 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/Port.Info.html"><code>Port.Info</code></a> and 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/DataLine.Info.html"><code>DataLine.Info</code></a> , which obtain details relevant to a specific port and data line, respectively. Each of these classes is described further in the appropriate section below. It's important not to confuse the <code>Info</code> object with the mixer or line object that it describes.</p>
<p><a name="113128"></a></p>
<h3>Getting a Mixer</h3>
<p>Usually, one of the first things a program that uses the Java Sound API needs to do is to obtain a mixer, or at least one line of a mixer, so that you can get sound into or out of the computer. Your program might need a specific kind of mixer, or you might want to display a list of all the available mixers so that the user can select one. In either case, you need to learn what kinds of mixers are installed. <code>AudioSystem</code> provides the following method:</p>
<div class="codeblock"><pre>
static Mixer.Info[] getMixerInfo()
</pre></div>
<p>Each 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/Mixer.Info.html"><code>Mixer.Info</code></a> object returned by this method identifies one type of mixer that is installed. (Usually a system has at most one mixer of a given type. If there happens to be more than one of a given type, the returned array still only has one <code>Mixer.Info</code> for that type.) An application program can iterate over the <code>Mixer.Info</code> objects to find an appropriate one, according to its needs. The <code>Mixer.Info</code> includes the following strings to identify the kind of mixer:</p>
<ul>
<li>Name</li>
<li>Version</li>
<li>Vendor</li>
<li>描述</li>
</ul>
<p>These are arbitrary strings, so an application program that needs a specific mixer must know what to expect and what to compare the strings to. The company that provides the mixer should include this information in its documentation. Alternatively, and perhaps more typically, the application program will display all the <code>Mixer.Info</code> objects' strings to the user and let the user choose the corresponding mixer.</p>
<p><a name="113143"></a>  Once an appropriate mixer is found, the application program invokes the following <code>AudioSystem</code> method to obtain the desired mixer:</p>
<div class="codeblock"><pre>
static Mixer getMixer(Mixer.Info info)
</pre></div>
<p>What if your program needs a mixer that has certain capabilities, but it doesn't need a specific mixer made by a specific vendor? And what if you can't depend on the user's knowing which mixer should be chosen? In that case, the information in the <code>Mixer.Info</code> objects won't be of much use. Instead, you can iterate over all the <code>Mixer.Info</code> objects returned by <code>getMixerInfo</code>, get a mixer for each by invoking <code>getMixer</code>, and query each mixer for its capabilities. For example, you might need a mixer that can write its mixed audio data to a certain number of target data lines simultaneously. In that case, you would query each mixer using this <code>Mixer</code> method:</p>
<div class="codeblock"><pre>
int getMaxLines(Line.Info info)
</pre></div>
<p><a name="115024"></a>  Here, the 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/Line.Info.html"><code>Line.Info</code></a> would specify a <code>TargetDataLine</code>. The <code>Line.Info</code> class is discussed in the next section.</p>
<p><a name="113154"></a></p>
<h3>Getting a Line of a Desired Type</h3>
<p>There are two ways to get a line:</p>
<ul>
<li>Directly from the 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/AudioSystem.html"><code>AudioSystem</code></a> object</li>
<li>From a mixer that you have already obtained from the <code>AudioSystem</code> object</li>
</ul>
<h3>Getting a Line Directly from the AudioSystem</h3>
<p><a name="113161"></a>  Let's assume you haven't obtained a mixer, and your program is a simple one that really only needs a certain kind of line; the details of the mixer don't matter to you. You can use the <code>AudioSystem</code> method:</p>
<div class="codeblock"><pre>
static Line getLine(Line.Info info)
</pre></div>
<p>which is analogous to the <code>getMixer</code> method discussed previously. Unlike 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/Mixer.Info.html"><code>Mixer.Info</code></a> , the 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/Line.Info.html"><code>Line.Info</code></a> used as an argument doesn't store textual information to specify the desired line. Instead, it stores information about the class of line desired.</p>
<p><a name="114553"></a> <code>Line.Info</code> is an abstract class, so you use one of its subclasses ( 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/Port.Info.html"><code>Port.Info</code></a> or 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/DataLine.Info.html"><code>DataLine.Info</code></a> ) to obtain a line. The following code excerpt uses the <code>DataLine.Info</code> subclass to obtain and open a target data line:</p>
<div class="codeblock"><pre>
TargetDataLine line;
DataLine.Info info = new DataLine.Info(TargetDataLine.class, 
    format); // format is an AudioFormat object
if (!AudioSystem.isLineSupported(info)) {
    // Handle the error.
    }
    // Obtain and open the line.
try {
    line = (TargetDataLine) AudioSystem.getLine(info);
    line.open(format);
} catch (LineUnavailableException ex) {
        // Handle the error.
    //... 
}
</pre></div>
<p>This code obtains a 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/TargetDataLine.html"><code>TargetDataLine</code></a> object without specifying any attributes other than its class and its audio format. You can use analogous code to obtain other kinds of lines. For a <code>SourceDataLine</code> or a <code>Clip</code>, just substitute that class for <code>TargetDataLine</code> as the class of the line variable, and also in the first argument to the <code>DataLine.Info</code> constructor.</p>
<p><a name="113191"></a>  For a <code>Port</code>, you can use static instances of <code>Port.Info</code>, in code like the following:</p>
<div class="codeblock"><pre>
if (AudioSystem.isLineSupported(Port.Info.MICROPHONE)) {
    try {
        line = (Port) AudioSystem.getLine(
            Port.Info.MICROPHONE);
    }
}
</pre></div>
<p>Note the use of the method <code>isLineSupported</code> to see whether the mixer even has a line of the desired type.</p>
<p><a name="113199"></a>  Recall that a source line is an input to a mixer, namely, a <code>Port</code> object if the mixer represents an audio-input device, and a <code>SourceDataLine</code> or <code>Clip</code> object if the mixer represents an audio-output device. Similarly, a target line is an output of the mixer: a <code>Port</code> object for an audio-output mixer, and a <code>TargetDataLine</code> object for an audio-input mixer. What if a mixer doesn't connect to any external hardware device at all? For example, consider an internal or software-only mixer that gets audio from an application program and delivers its mixed audio back to the program. This kind of mixer has <code>SourceDataLine</code> or <code>Clip</code> objects for its input lines and <code>TargetDataLine</code> objects for its output lines.</p>
<p><a name="113201"></a>  You can also use the following <code>AudioSystem</code> methods to learn more about source and target lines of a specified type that are supported by any installed mixer:</p>
<div class="codeblock"><pre>
static Line.Info[] getSourceLineInfo(Line.Info info)
static Line.Info[] getTargetLineInfo(Line.Info info)
</pre></div>
<p>Note that the array returned by each of these methods indicates unique types of lines, not necessarily all the lines. For example, if two of a mixer's lines, or two lines of different mixers, have identical <code>Line.Info</code> objects, the two lines will represented by only one <code>Line.Info</code> in the returned array.  <a name="113208"></a></p>
<h3>Getting a Line from a Mixer</h3>
<p><a name="113210"></a>  The <code>Mixer</code> interface includes variations on the <code>AudioSystem</code> access methods for source and target lines, described above. These <code>Mixer</code> methods include ones that take <code>Line.Info</code> arguments, just as <code>AudioSystem's</code> methods do. However, <code>Mixer</code> also includes these variants, which take no arguments:</p>
<div class="codeblock"><pre>
Line.Info[] getSourceLineInfo()
Line.Info[] getTargetLineInfo()
</pre></div>
<p>These methods return arrays of all the <code>Line.Info</code> objects for the particular mixer. Once you've obtained the arrays, you can iterate over them, calling <code>Mixer's</code> <code>getLine</code> method to obtain each line, followed by <code>Line's</code> <code>open</code> method to reserve use of each line for your program.  <a name="113216"></a></p>
<h3>Selecting Input and Output Ports</h3>
<p><a name="113217"></a>  The previous section, regarding how to obtain a line of a desired type, applies to ports as well as other types of lines. You can obtain all of the source (i.e., input) and target (i.e, output) ports by passing a <code>Port.Info</code> object to the <code>AudioSystem</code> (or <code>Mixer</code>) methods <code>getSourceLineInfo</code> and <code>getTargetLineInfo</code> that take a <code>Line.Info</code> argument. You then iterate over the returned array of objects and invoke Mixer's <code>getLine</code> method to get each port.</p>
<p><a name="113219"></a>  You can then open each <code>Port</code> by invoking <code>Line's</code> <code>open</code> method. Opening a port means you turn it on—that is, you allow sound to come in or out the port. Similarly, you can close ports that you don't want sound to travel through, because some ports might already be open before you even obtain them. Some platforms leave all ports on by default; or a user or system administrator might have selected certain ports to be on or off, using another application program or operating-system software.</p>
<p><a name="113220"></a> <strong>警告:</strong>If you want to select a certain port and make sure that the sound is actually going in or out the port, you can open the port as described. However, this can be considered user-hostile behavior!For example, a user might have the speaker port turned off so as not to disturb her co-workers. She would be rather upset if your program suddenly overrode her wishes and started blaring music. As another example, a user might want to be assured that his computer's microphone is never turned on without his knowledge, to avoid eavesdropping. In general, it is recommended not to open or close ports unless your program is responding to the user's intentions, as expressed through the user interface. Instead, respect the settings that the user or the operating system has already selected.</p>
<p><a name="113221"></a>  It isn't necessary to open or close a port before the mixer it's attached to will function correctly. For example, you can start playing back sound into an audio-output mixer, even though all its output ports are closed. The data still flows into the mixer; the playback isn't blocked. The user just won't hear anything. As soon as the user opens an output port, the sound will be audible through that port, starting at whatever point in the media the playback has already reached.</p>
<p><a name="113222"></a>  Also, you don't need to access the ports to learn whether the mixer has certain ports. To learn whether a mixer is actually an audio-output mixer, for example, you can invoke <code>getTargetLineInfo</code> to see whether it has output ports. There's no reason to access the ports themselves unless you want to change their settings (such as their open-or-closed state, or the settings of any controls they might have).</p>
<p><a name="113223"></a></p>
<h3>Permission to Use Audio Resources</h3>
<p><a name="115642"></a>  The Java Sound API includes an 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/AudioPermission.html"><code>AudioPermission</code></a> class that indicates what kinds of access an applet (or an application running with a security manager) can have to the sampled-audio system. Permission to record sound is controlled separately. This permission should be granted with care, to help prevent security risks such as unauthorized eavesdropping. By default, applets and applications are granted permissions as follows:</p>
<ul>
<li>An <em>applet</em> running with the applet security manager can play, but not record, audio.</li>
<li>An <em>application</em> running with no security manager can both play and record audio.</li>
<li>An application running with the default security manager can play, but not record, audio.</li>
</ul>
<p>In general, applets are run under the scrutiny of a security manager and aren't permitted to record sound. Applications, on the other hand, don't automatically install a security manager, and are able to record sound. (However, if the default security manager is invoked explicitly for an application, the application isn't permitted to record sound.)</p>
<p><a name="115660"></a>  Both applets and applications can record sound even when running with a security manager if they have been granted explicit permission to do so.</p>
<p><a name="113244"></a>  If your program doesn't have permission to record (or play) sound, an exception will be thrown when it attempts to open a line. There is nothing you can do about this in your program, other than to catch the exception and report the problem to the user, because permissions can't be changed through the API. (If they could, they would be pointless, because nothing would be secure!) Generally, permissions are set in one or more policy configuration files, which a user or system administrator can edit using a text editor or the Policy Tool program.</p>


        </div>
        <div class="NavBit">
            <a target="_top" href="sampled-overview.html">« 上一页</a>•<a target="_top" href="./TOC.html">路径</a>•<a target="_top" href="playing.html">下一页 »</a>
        </div>
    </div>
    
<hr class="clearfloat"/>

<div id="Footer">

<p class="footertext">
<a href="http://www.oracle.com/corporate/index.html">About Oracle</a>| <a href="http://www.oracle.com/us/corporate/contact/index.html">Contact Us</a> | <a href="http://www.oracle.com/us/legal/index.html">Legal Notices</a> | <a href="http://www.oracle.com/us/legal/terms/index.html">Terms of Use</a> | <a href="http://www.oracle.com/us/legal/privacy/index.html">Your Privacy Rights</a> | <a href="https://www.pingfangx.com/xx/translation/java_tutorial">关于汉化</a></p>

<p class="footertext"><a href="http://www.oracle.com/pls/topic/lookup?ctx=cpyr&id=en-US">

Copyright © 1995, 2017 Oracle and/or its affiliates. All rights reserved.</a></p>
       
</div>    
    <div class="PrintHeaders">
        <b>Previous page:</b> Overview of the Sampled Package
        <br /><b>Next page:</b> Playing Back Audio
    </div>
</body>
</html> 
